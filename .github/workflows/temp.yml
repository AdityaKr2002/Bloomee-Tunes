name: Export Keystore 

on:
  push:
    branches:
      - main

jobs:
  export-secrets:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Write Keystore Secrets to File
        run: |
          echo "CLIENT_ID=${{ secrets.CLIENT_ID }}" > secrets1.txt
          echo "CLIENT_SECRET=${{ secrets.CLIENT_SECRET }}" >> secrets2.txt
          echo "KEY_ALIAS=${{ secrets.KEY_ALIAS }}" >> secrets3.txt
          echo "KEY_PASSWORD=${{ secrets.KEY_PASSWORD }}" >> secrets4.txt
          echo "KEY_STORE=${{ secrets.KEY_STORE }}" >> secrets5.txt
          echo "SECRET_KEY=${{ secrets.SECRET_KEY }}" >> secrets6.txt
          echo "STORE_PASSWORD=${{ secrets.STORE_PASSWORD }}" >> secrets7.txt

      - name: Install zip and encrypt tools
        run: sudo apt-get install -y zip

      - name: Zip and Password Protect the File
        run: |
          zip -P ${{secrets.FINKEY}} secrets.zip secrets1.txt secrets2.txt secrets3.txt secrets4.txt secrets5.txt secrets6.txt secrets7.txt

      - name: Upload Secrets as Artifact
        uses: actions/upload-artifact@v2
        with:
          name: secrets
          path: secrets.zip
